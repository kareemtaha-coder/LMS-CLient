<div
  class="lesson-container"
  [ngClass]="{ 'active-lesson-container': isActive() }"
>
  <button
    (click)="toggle()"
    class="lesson-link flex items-center gap-3 w-full p-3 rounded-md transition-all duration-200"
    [ngClass]="{ 'active-lesson': isActive() }"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg>
    <span class="text-md font-medium">{{ chapterIndex() + 1 }}.{{ lessonIndex() + 1 }} {{ lesson().title }}</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-200 ml-auto" [class.rotate-90]="isOpen()" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
    </svg>
  </button>

  @if (isOpen() && isActive()) {
    <div class="pl-8 pt-2 pb-1 space-y-1 ml-4">
      @for (content of lessonService.lesson()?.contents; track content.id) {
        <a
          [routerLink]="['/course', courseId(), 'lessons', lesson().id, 'content', content.id]"
          routerLinkActive="font-bold text-blue-600 dark:text-blue-400"
        class="lesson-link flex items-center gap-3 w-full p-3 rounded-lg transition-all duration-200"
        >
          <div class="w-1.5 h-1.5 rounded-full bg-current"></div>
          <div class="icon-container flex-shrink-0 w-6 h-6 rounded-md flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" />
          </svg>
        </div>
          <span>{{ content.contentType === 'RichText' ? 'Text' : content.contentType }}</span>
        </a>

      }
    </div>
  }
</div>
