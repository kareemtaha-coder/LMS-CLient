<div class="flex-1 bg-gray-50 dark:bg-slate-800/50">

  @if (lessonService.loading()) {
    <div class="flex-1 p-6 lg:p-8 animate-pulse">
      <header class="pb-6 border-b border-gray-200 dark:border-slate-700 mb-8">
        <div class="h-9 w-3/4 bg-gray-200 dark:bg-slate-700 rounded-md"></div>
        <div class="h-6 w-1/4 bg-gray-200 dark:bg-slate-700 rounded-md mt-4"></div>
      </header>
      <div class="max-w-4xl mx-auto space-y-8">
        <div class="h-24 w-full bg-gray-200 dark:bg-slate-700 rounded-xl"></div>
        <div class="h-48 w-full bg-gray-200 dark:bg-slate-700 rounded-xl"></div>
      </div>
    </div>
  }

  @if (lessonService.error(); as error) {
    <div class="flex-1 p-6 lg:p-8">
      <div class="p-6 bg-red-100 text-red-800 rounded-lg border border-red-200 text-center">
        <h3 class="text-xl font-bold">حدث خطأ</h3>
        <p class="mt-2">{{ error }}</p>
      </div>
    </div>
  }

  @if (lessonService.lesson(); as lesson) {
    <div class="flex-1 p-6 lg:p-8">
      <header class="pb-6 border-b border-gray-200 dark:border-slate-700 mb-8">
        <h1 class="text-3xl font-bold text-slate-900 dark:text-slate-50">
          {{ lesson.title }}
        </h1>
        <a routerLink="/curriculums" class="mt-4 inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 font-bold">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
          العودة
        </a>
      </header>

      <section class="max-w-4xl mx-auto">
        @if (lesson.contents.length > 0) {
          <div class="space-y-8">
            @for (content of lesson.contents; track content.id) {
              @switch (content.contentType) {
                @case ('RichText') {
                  <app-rich-text-content [content]="content" />
                }
                @case ('Video') {
                  <app-video-content [content]="content" />
                }
                @case ('ImageWithCaption') {
                  <app-image-with-caption-content [content]="content" />
                }
                @case ('ExamplesGrid') {
                  <app-examples-grid-content [content]="content" />
                }
                @default {
                  <div class="p-4 bg-gray-100 dark:bg-slate-700 rounded-lg">
                    <p class="font-mono text-sm">محتوى غير معروف</p>
                  </div>
                }
              }
            }
          </div>
        } @else {
          <div class="text-center py-12">
            <h3 class="text-xl font-bold text-slate-700 dark:text-slate-300">هذا الدرس فارغ حاليًا</h3>
            <p class="text-slate-500 dark:text-slate-400 mt-2">سيتم إضافة المحتوى قريبًا.</p>
          </div>
        }
      </section>
    </div>
  }
</div>
